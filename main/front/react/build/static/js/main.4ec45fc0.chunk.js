(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{23:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var c=n(16),o=n.n(c),r=n(9),s=(n(23),n(0)),i=n.n(s),a=n(2),j=n(18),l=n(1),u=i.a.createContext({token:"",isLoggedIn:!1,login:function(e){},logout:function(){}}),d=function(e){var t=Object(s.useState)(null),n=Object(j.a)(t,2),c=n[0],o=n[1],r={token:c,isLoggedIn:!!c,login:function(e){o(e),localStorage.setItem("token",e)},logout:function(){o(null),localStorage.removeItem("token")}};return Object(l.jsx)(u.Provider,{value:r,children:e.children})},b=u,h=n(8),O=n.n(h),g=function(){var e=Object(a.g)(),t=Object(s.useRef)(),n=Object(s.useRef)(),c=Object(s.useContext)(b);return Object(l.jsxs)("div",{className:O.a.container,children:[Object(l.jsx)("div",{children:Object(l.jsx)("img",{className:O.a.image,alt:""})}),Object(l.jsx)("h2",{children:"\uc6d0\ub8f8\ub9ccLab \uc0c1\ud488\uad00\ub9ac"}),Object(l.jsx)("br",{}),Object(l.jsxs)("form",{onSubmit:function(o){o.preventDefault();var r=t.current.value,s=n.current.value;fetch("http://localhost:5000/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:s})}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw new Error(e?e.description:"fuck, it's an error")}))})).then((function(t){c.login(t.access_token),e.replace("/dashboard")})).catch((function(e){console.log(e)}))},children:[Object(l.jsxs)("div",{className:O.a.control,children:[Object(l.jsx)("label",{children:"ID"}),Object(l.jsx)("input",{type:"username",id:"username",required:!0,ref:t})]}),Object(l.jsxs)("div",{className:O.a.control,children:[Object(l.jsx)("label",{children:"PASSWORD"}),Object(l.jsx)("input",{type:"password",id:"password",required:!0,ref:n})]}),Object(l.jsx)("div",{className:O.a.actions,children:Object(l.jsx)("button",{children:"LOGIN"})})]})]})},x=function(){return Object(l.jsx)(g,{})},f=function(){var e=Object(a.g)(),t=Object(s.useContext)(b);return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Dashboard Page"}),Object(l.jsx)("button",{onClick:function(n){n.preventDefault(),console.log(t.isLoggedIn),t.logout(),console.log(t.isLoggedIn),e.replace("/")},children:"Log out"})]})};var m=function(){var e=Object(s.useContext)(b);return Object(l.jsxs)(a.d,{children:[Object(l.jsxs)(a.b,{path:"/",children:[!e.isLoggedIn&&Object(l.jsx)(x,{}),e.isLoggedIn&&Object(l.jsx)(a.a,{to:"/dashboard"})]}),Object(l.jsxs)(a.b,{path:"/dashboard",children:[e.isLoggedIn&&Object(l.jsx)(f,{}),!e.isLoggedIn&&Object(l.jsx)(a.a,{to:"/"})]})]})};o.a.render(Object(l.jsx)(d,{children:Object(l.jsx)(r.a,{children:Object(l.jsx)(m,{})})}),document.getElementById("root"))},8:function(e,t,n){e.exports={actions:"AuthForm_actions__1VNhY",container:"AuthForm_container__c83gh",control:"AuthForm_control__2fVSU",image:"AuthForm_image__3dmI2"}}},[[30,1,2]]]);
//# sourceMappingURL=main.4ec45fc0.chunk.js.map