{"ast":null,"code":"import{useRef,useContext}from\"react\";import{useHistory}from\"react-router-dom\";import AuthContext from\"../../store/auth-context\";import classes from\"./AuthForm.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AuthForm=function AuthForm(){var history=useHistory();var usernameInputRef=useRef();var passwordInputRef=useRef();var authCtx=useContext(AuthContext);var submitHandler=function submitHandler(e){e.preventDefault();var enteredUsername=usernameInputRef.current.value;var enteredPassword=passwordInputRef.current.value;fetch(\"http://localhost:5000/auth\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:enteredUsername,password:enteredPassword})}).then(function(res){if(res.ok){return res.json();}else{return res.json().then(function(data){throw new Error(data?data.description:\"fuck, it's an error\");});}}).then(function(data){authCtx.login(data.access_token);history.replace(\"/dashboard\");}).catch(function(e){console.log(e);});};return/*#__PURE__*/_jsxs(\"div\",{className:classes.container,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{className:classes.image,alt:\"\"})}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\uC6D0\\uB8F8\\uB9CCLab \\uC0C1\\uD488\\uAD00\\uB9AC\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.control,children:[/*#__PURE__*/_jsx(\"label\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"username\",id:\"username\",required:true,ref:usernameInputRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.control,children:[/*#__PURE__*/_jsx(\"label\",{children:\"PASSWORD\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",required:true,ref:passwordInputRef})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(\"button\",{children:\"LOGIN\"})})]})]});};export default AuthForm;","map":{"version":3,"sources":["/Users/chansollim/Desktop/dev/soldOut/main/front/react/src/components/Auth/AuthForm.js"],"names":["useRef","useContext","useHistory","AuthContext","classes","AuthForm","history","usernameInputRef","passwordInputRef","authCtx","submitHandler","e","preventDefault","enteredUsername","current","value","enteredPassword","fetch","method","headers","body","JSON","stringify","username","password","then","res","ok","json","data","Error","description","login","access_token","replace","catch","console","log","container","image","control","actions"],"mappings":"AAAA,OAASA,MAAT,CAAiBC,UAAjB,KAAmC,OAAnC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CAEA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,C,wFAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrB,GAAMC,CAAAA,OAAO,CAAGJ,UAAU,EAA1B,CACA,GAAMK,CAAAA,gBAAgB,CAAGP,MAAM,EAA/B,CACA,GAAMQ,CAAAA,gBAAgB,CAAGR,MAAM,EAA/B,CAEA,GAAMS,CAAAA,OAAO,CAAGR,UAAU,CAACE,WAAD,CAA1B,CAEA,GAAMO,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAAO,CAC3BA,CAAC,CAACC,cAAF,GAEA,GAAMC,CAAAA,eAAe,CAAGN,gBAAgB,CAACO,OAAjB,CAAyBC,KAAjD,CACA,GAAMC,CAAAA,eAAe,CAAGR,gBAAgB,CAACM,OAAjB,CAAyBC,KAAjD,CAEAE,KAAK,CAAC,4BAAD,CAA+B,CAClCC,MAAM,CAAE,MAD0B,CAElCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFyB,CAKlCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,QAAQ,CAAEV,eADS,CAEnBW,QAAQ,CAAER,eAFS,CAAf,CAL4B,CAA/B,CAAL,CAUGS,IAVH,CAUQ,SAACC,GAAD,CAAS,CACb,GAAIA,GAAG,CAACC,EAAR,CAAY,CACV,MAAOD,CAAAA,GAAG,CAACE,IAAJ,EAAP,CACD,CAFD,IAEO,CACL,MAAOF,CAAAA,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgB,SAACI,IAAD,CAAU,CAC/B,KAAM,IAAIC,CAAAA,KAAJ,CAAUD,IAAI,CAAGA,IAAI,CAACE,WAAR,CAAsB,qBAApC,CAAN,CACD,CAFM,CAAP,CAGD,CACF,CAlBH,EAmBGN,IAnBH,CAmBQ,SAACI,IAAD,CAAU,CACdpB,OAAO,CAACuB,KAAR,CAAcH,IAAI,CAACI,YAAnB,EACA3B,OAAO,CAAC4B,OAAR,CAAgB,YAAhB,EACD,CAtBH,EAuBGC,KAvBH,CAuBS,SAACxB,CAAD,CAAO,CACZyB,OAAO,CAACC,GAAR,CAAY1B,CAAZ,EACD,CAzBH,EA0BD,CAhCD,CAkCA,mBACE,aAAK,SAAS,CAAEP,OAAO,CAACkC,SAAxB,wBACE,kCACE,YAAK,SAAS,CAAElC,OAAO,CAACmC,KAAxB,CAA+B,GAAG,CAAC,EAAnC,EADF,EADF,cAIE,sEAJF,cAKE,aALF,cAME,cAAM,QAAQ,CAAE7B,aAAhB,wBACE,aAAK,SAAS,CAAEN,OAAO,CAACoC,OAAxB,wBACE,6BADF,cAEE,cACE,IAAI,CAAC,UADP,CAEE,EAAE,CAAC,UAFL,CAGE,QAAQ,KAHV,CAIE,GAAG,CAAEjC,gBAJP,EAFF,GADF,cAUE,aAAK,SAAS,CAAEH,OAAO,CAACoC,OAAxB,wBACE,mCADF,cAEE,cACE,IAAI,CAAC,UADP,CAEE,EAAE,CAAC,UAFL,CAGE,QAAQ,KAHV,CAIE,GAAG,CAAEhC,gBAJP,EAFF,GAVF,cAmBE,YAAK,SAAS,CAAEJ,OAAO,CAACqC,OAAxB,uBACE,iCADF,EAnBF,GANF,GADF,CAgCD,CAzED,CA2EA,cAAepC,CAAAA,QAAf","sourcesContent":["import { useRef, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport AuthContext from \"../../store/auth-context\";\n\nimport classes from \"./AuthForm.module.css\";\n\nconst AuthForm = () => {\n  const history = useHistory();\n  const usernameInputRef = useRef();\n  const passwordInputRef = useRef();\n\n  const authCtx = useContext(AuthContext);\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n\n    const enteredUsername = usernameInputRef.current.value;\n    const enteredPassword = passwordInputRef.current.value;\n\n    fetch(\"http://localhost:5000/auth\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        username: enteredUsername,\n        password: enteredPassword,\n      }),\n    })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        } else {\n          return res.json().then((data) => {\n            throw new Error(data ? data.description : \"fuck, it's an error\");\n          });\n        }\n      })\n      .then((data) => {\n        authCtx.login(data.access_token);\n        history.replace(\"/dashboard\");\n      })\n      .catch((e) => {\n        console.log(e);\n      });\n  };\n\n  return (\n    <div className={classes.container}>\n      <div>\n        <img className={classes.image} alt=\"\" />\n      </div>\n      <h2>원룸만Lab 상품관리</h2>\n      <br />\n      <form onSubmit={submitHandler}>\n        <div className={classes.control}>\n          <label>ID</label>\n          <input\n            type=\"username\"\n            id=\"username\"\n            required\n            ref={usernameInputRef}\n          />\n        </div>\n        <div className={classes.control}>\n          <label>PASSWORD</label>\n          <input\n            type=\"password\"\n            id=\"password\"\n            required\n            ref={passwordInputRef}\n          />\n        </div>\n        <div className={classes.actions}>\n          <button>LOGIN</button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default AuthForm;\n"]},"metadata":{},"sourceType":"module"}